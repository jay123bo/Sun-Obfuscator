<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sun Obfuscator V4 - VM Protection</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap');

* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family: 'Rajdhani', sans-serif;
    background:#0a0a0a;
    color:#e0e0e0;
    overflow-x:hidden;
}
header {
    padding:40px;
    text-align:center;
    border-bottom:3px solid #ff8c00;
}
h1 {
    font-family:'Orbitron';
    font-size:3rem;
    letter-spacing:6px;
    background:linear-gradient(90deg,#ffa500,#ff6b00);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}
.subtitle { color:#888; letter-spacing:3px; margin-top:10px; }
.container { max-width:1400px; margin:auto; padding:30px; }

textarea {
    width:100%;
    min-height:300px;
    background:#0d0d0d;
    color:#00ff00;
    border:2px solid #333;
    padding:20px;
    border-radius:8px;
    font-family:monospace;
}

button {
    padding:14px 30px;
    margin:8px;
    background:linear-gradient(135deg,#ff8c00,#ff6b00);
    border:none;
    border-radius:6px;
    font-weight:700;
    cursor:pointer;
}

button.secondary {
    background:transparent;
    border:2px solid #ff8c00;
    color:#ff8c00;
}

footer {
    text-align:center;
    margin:40px;
    color:#666;
}
</style>
</head>

<body>

<header>
<h1>SUN OBFUSCATOR V4</h1>
<div class="subtitle">VM-BASED LUA PROTECTION</div>
</header>

<div class="container">

<h3>Input Lua Code</h3>
<textarea id="inputCode">print("Hello World")</textarea>

<br><br>

<button onclick="obfuscateCode()">ðŸ”’ OBFUSCATE</button>
<button class="secondary" onclick="copyOutput()">ðŸ“‹ COPY</button>
<button class="secondary" onclick="downloadOutput()">ðŸ’¾ DOWNLOAD</button>

<br><br>

<h3>Protected Output</h3>
<textarea id="outputCode" readonly></textarea>

</div>

<footer>
Sun Obfuscator V4 Â© 2026
</footer>

<script>
/* ===============================
   LUA OBFUSCATOR CORE
================================ */

class LuaObfuscator {

    constructor() {
        this.counter = 0;
    }

    randName(len = 10) {
        const chars = "Il1O0";
        let out = "";
        for (let i = 0; i < len; i++)
            out += chars[Math.floor(Math.random() * chars.length)];
        return out;
    }

    xor(data, key) {
        let r = "";
        for (let i = 0; i < data.length; i++)
            r += String.fromCharCode(data.charCodeAt(i) ^ key);
        return r;
    }

    generateBytecode(code) {
        const chunks = [];
        for (let i = 0; i < code.length; i += 40)
            chunks.push(code.slice(i, i + 40));

        return chunks.map((c, i) =>
            btoa(this.xor(c, (i * 17 + 23) & 255))
        );
    }

    obfuscate(code) {
        if (!code.trim()) throw new Error("Empty code");

        const bytecode = this.generateBytecode(code);
        const scriptId = "SUN" + Math.floor(Math.random() * 1e9).toString(16).toUpperCase();

        return `
--[[ 
 SUN OBFUSCATOR V4
 Script ID: ${scriptId}
 WARNING: VM PROTECTED
]]

local VM_DATA = {
${bytecode.map(b => `    "${b}"`).join(",\n")}
}

local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
local function base64_decode(data)
    data = string.gsub(data,'[^'..b..'=]','')
    return (data:gsub('.',function(x)
        if x=='=' then return '' end
        local r,f='',(b:find(x)-1)
        for i=6,1,-1 do
            r=r..(f%2^i-f%2^(i-1)>0 and '1' or '0')
        end
        return r
    end):gsub('%d%d%d?%d?%d?%d?%d?%d?',function(x)
        if #x~=8 then return '' end
        local c=0
        for i=1,8 do
            c=c+(x:sub(i,i)=='1' and 2^(8-i) or 0)
        end
        return string.char(c)
    end))
end

local function VM_EXEC()
    local out=""
    for i=1,#VM_DATA do
        local d=base64_decode(VM_DATA[i])
        local k=(i*17+23)%256
        for j=1,#d do
            out=out..string.char(string.byte(d,j) ~ k)
        end
    end
    local f,e=loadstring(out)
    if not f then error(e) end
    return f()
end

return VM_EXEC()
`;
    }
}

/* ===============================
   UI HANDLERS
================================ */

function obfuscateCode() {
    try {
        const input = document.getElementById("inputCode").value;
        const obf = new LuaObfuscator();
        document.getElementById("outputCode").value = obf.obfuscate(input);
    } catch (e) {
        alert(e.message);
    }
}

function copyOutput() {
    const out = document.getElementById("outputCode");
    out.select();
    document.execCommand("copy");
}

function downloadOutput() {
    const data = document.getElementById("outputCode").value;
    if (!data) return;
    const blob = new Blob([data], {type:"text/plain"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "sun_protected.lua";
    a.click();
}
</script>

</body>
</html>
