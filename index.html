<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sun Obfuscator v3.1</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800;900&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  background:#050505;
  color:#eaeaea;
  font-family:monospace;
}
header{
  padding:60px 20px 40px;
  text-align:center;
  border-bottom:2px solid #ff8c00;
}
h1{
  font-family:'Orbitron',sans-serif;
  font-size:3.8rem;
  color:#ff8c00;
}
.version{
  margin-top:12px;
  color:#ffa500;
  letter-spacing:4px;
}
.container{
  max-width:1400px;
  margin:auto;
  padding:50px 30px;
}
.box{
  background:linear-gradient(180deg,#111,#090909);
  border:2px solid #ff8c00;
  border-radius:10px;
  margin-bottom:40px;
  overflow:hidden;
}
.box h2{
  background:#ff8c00;
  color:#000;
  padding:16px 20px;
  letter-spacing:3px;
  font-size:1rem;
}
.content{padding:25px}
textarea{
  width:100%;
  min-height:260px;
  background:#030303;
  border:2px solid #333;
  color:#00ff66;
  padding:16px;
  font-size:14px;
}
.actions{
  display:flex;
  gap:15px;
  flex-wrap:wrap;
}
button{
  padding:15px 42px;
  font-size:1rem;
  font-weight:bold;
  background:linear-gradient(135deg,#ff8c00,#ff6b00);
  border:none;
  border-radius:8px;
  cursor:pointer;
}
footer{
  text-align:center;
  color:#555;
  margin:60px 0 40px;
}
</style>
</head>

<body>

<header>
  <h1>SUN OBFUSCATOR</h1>
  <div class="version">v3.1 · HYBRID VM · ROBLOX COMPATIBLE</div>
</header>

<div class="container">

<div class="box">
<h2>INPUT LUA</h2>
<div class="content">
<textarea id="input">
local Players = game:GetService("Players")

local a = 5
print(a)
print("Sun Obfuscator v3.1")
</textarea>
</div>
</div>

<div class="box">
<h2>BUILD</h2>
<div class="content actions">
<button onclick="obfuscate()">OBFUSCATE</button>
<button onclick="copyAll()">COPY ALL</button>
</div>
</div>

<div class="box">
<h2>OUTPUT</h2>
<div class="content">
<textarea id="output" readonly></textarea>
</div>
</div>

</div>

<footer>Sun Obfuscator v3.1 © 2026</footer>

<script>
// ================= UTILS =================
function rnd(min,max){return Math.floor(Math.random()*(max-min))+min}
function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1))
    ;[a[i],a[j]]=[a[j],a[i]]
  }
}

// ================= OBFUSCATOR =================
function obfuscate(){
  const src=document.getElementById("input").value.split("\n")
  if(!src.length) return alert("No input")

  const KEY=rnd(50,200)

  let OPS=["LOADK","PRINT"]
  shuffle(OPS)
  const OP={}
  OPS.forEach((o,i)=>OP[o]=i)

  let consts=[]
  let symbols={}
  let regCount=0
  let bc=[]
  let raw=[]

  function addConst(v){
    let i=consts.findIndex(c=>c.v===v)
    if(i!==-1) return i
    consts.push({v})
    return consts.length-1
  }

  for(let line of src){
    line=line.trim()
    if(!line) continue

    let m

    if(m=line.match(/^local\s+(\w+)\s*=\s*(\d+)$/)){
      const r=regCount++
      symbols[m[1]]=r
      bc.push([OP.LOADK,r,addConst(Number(m[2]))])
      continue
    }

    if(m=line.match(/^print\s*\(\s*["'](.+)["']\s*\)$/)){
      const r=regCount++
      bc.push([OP.LOADK,r,addConst(m[1])])
      bc.push([OP.PRINT,r])
      continue
    }

    if(m=line.match(/^print\s*\(\s*(\w+)\s*\)$/)){
      if(symbols[m[1]]!==undefined){
        bc.push([OP.PRINT,symbols[m[1]]])
        continue
      }
    }

    // EVERYTHING ELSE → RAW
    raw.push(line)
  }

  const encConsts=consts.map(c=>{
    if(typeof c.v==="string"){
      return [...c.v].map(ch=>ch.charCodeAt(0)^KEY)
    }
    return c.v^KEY
  })

  const encBC=bc.map(i=>i.map(v=>v^KEY))

  const out=`-- Sun Obfuscator v3.1
do
  debug=nil
  local K=${KEY}
  local function d(v)return v~K end

  local RAW={
${raw.map(l=>"    "+JSON.stringify(l)).join(",\n")}
  }

  if #RAW>0 then
    local src=table.concat(RAW,"\\n")
    local f=(loadstring or load)(src)
    if f then f() end
  end

  local C=${JSON.stringify(encConsts)}
  local BC=${JSON.stringify(encBC)}
  local OP=${JSON.stringify(OP)}

  local R={}
  local pc=1

  local function getConst(i)
    local v=C[i+1]
    if type(v)=="table" then
      local s=""
      for j=1,#v do s=s..string.char(d(v[j])) end
      return s
    end
    return d(v)
  end

  while pc<=#BC do
    local I=BC[pc]
    local op=d(I[1])

    if op==OP.LOADK then
      R[d(I[2])]=getConst(d(I[3]))
    elseif op==OP.PRINT then
      print(R[d(I[2])])
    end

    pc=pc+1
  end
end`

  document.getElementById("output").value=out
}

function copyAll(){
  const o=document.getElementById("output")
  o.select()
  document.execCommand("copy")
}
</script>

</body>
</html>
